<!DOCTYPE html>
<html lang="nl">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>Het Innovatie Portfolio Spel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="preconnect"
      href="https://fonts.googleapis.com"
    />
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Inter", sans-serif;
      }
      .card-enter {
        animation: card-enter 0.5s ease-out;
      }
      @keyframes card-enter {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .modal-backdrop {
        transition: opacity 0.3s ease;
      }
      .modal-content {
        transition: transform 0.3s ease, opacity 0.3s ease;
      }
    </style>
  </head>
  <body
    class="bg-slate-50 text-slate-800 flex items-center justify-center min-h-screen p-4"
  >
    <div class="w-full max-w-5xl mx-auto">
      <header class="text-center mb-6">
        <h1 class="text-3xl md:text-4xl font-bold text-slate-900">
          Het Innovatie Portfolio Spel
        </h1>
        <p class="text-slate-600 mt-2">
          Verdeel je budget tussen zekerheid (Exploit) en risico (Explore).
        </p>
      </header>

      <!-- Dashboard -->
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 text-center">
        <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-200">
          <h3 class="text-sm font-semibold text-slate-500 uppercase">Jaar</h3>
          <p
            id="current-year"
            class="text-2xl font-bold text-blue-600"
          >
            1 / 5
          </p>
        </div>
        <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-200">
          <h3 class="text-sm font-semibold text-slate-500 uppercase">
            Startbudget
          </h3>
          <p
            id="start-budget"
            class="text-2xl font-bold text-slate-800"
          >
            €100M
          </p>
        </div>
        <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-200">
          <h3 class="text-sm font-semibold text-slate-500 uppercase">
            Geïnvesteerd
          </h3>
          <p
            id="invested-amount"
            class="text-2xl font-bold text-slate-800"
          >
            €0M
          </p>
        </div>
        <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-200">
          <h3 class="text-sm font-semibold text-slate-500 uppercase">
            Resterend Budget
          </h3>
          <p
            id="remaining-budget"
            class="text-2xl font-bold text-green-600"
          >
            €100M
          </p>
        </div>
      </div>

      <!-- Investment Cards -->
      <main class="grid md:grid-cols-3 gap-6">
        <!-- Card 1: Exploit -->
        <div
          class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 card-enter"
          style="animation-delay: 0.1s"
        >
          <div class="flex items-center mb-4">
            <div class="bg-blue-100 text-blue-600 p-3 rounded-lg mr-4">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
              </svg>
            </div>
            <div>
              <h2 class="text-xl font-bold text-slate-900">
                Project 'Cash Cow'
              </h2>
              <p class="text-sm font-medium text-blue-600">EXPLOIT</p>
            </div>
          </div>
          <p class="text-slate-600 mb-4">
            Optimaliseer de kernactiviteiten. Een veilige, voorspelbare
            investering.
          </p>
          <div class="bg-slate-100 p-3 rounded-lg mb-4">
            <p><strong>Kosten:</strong> €20M</p>
            <p>
              <strong>Opbrengst:</strong> Gegarandeerd €25M
              <span class="text-green-600 font-semibold">(+€5M winst)</span>
            </p>
          </div>
          <label
            for="invest-cash-cow"
            class="font-semibold text-slate-700"
            >Aantal investeringen:</label
          >
          <input
            type="number"
            id="invest-cash-cow"
            min="0"
            value="0"
            class="mt-2 w-full p-2 rounded-lg border-slate-300 border focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
          />
        </div>

        <!-- Card 2: Sustaining Innovation -->
        <div
          class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 card-enter"
          style="animation-delay: 0.2s"
        >
          <div class="flex items-center mb-4">
            <div class="bg-purple-100 text-purple-600 p-3 rounded-lg mr-4">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <line
                  x1="12"
                  y1="5"
                  x2="12"
                  y2="19"
                ></line>
                <line
                  x1="5"
                  y1="12"
                  x2="19"
                  y2="12"
                ></line>
              </svg>
            </div>
            <div>
              <h2 class="text-xl font-bold text-slate-900">
                Project 'Better Faster'
              </h2>
              <p class="text-sm font-medium text-purple-600">SUSTAIN</p>
            </div>
          </div>
          <p class="text-slate-600 mb-4">
            Verbeter bestaande processen. Een berekend risico met een goede kans
            op succes.
          </p>
          <div class="bg-slate-100 p-3 rounded-lg mb-4">
            <p><strong>Kosten:</strong> €10M</p>
            <p>
              <strong>Opbrengst:</strong> 50% kans op €20M
              <span class="text-green-600 font-semibold">(+€10M)</span>, 50%
              kans op €8M <span class="text-red-600 font-semibold">(-€2M)</span>
            </p>
          </div>
          <label
            for="invest-better-faster"
            class="font-semibold text-slate-700"
            >Aantal investeringen:</label
          >
          <input
            type="number"
            id="invest-better-faster"
            min="0"
            value="0"
            class="mt-2 w-full p-2 rounded-lg border-slate-300 border focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition"
          />
        </div>

        <!-- Card 3: Explore -->
        <div
          class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 card-enter"
          style="animation-delay: 0.3s"
        >
          <div class="flex items-center mb-4">
            <div class="bg-amber-100 text-amber-600 p-3 rounded-lg mr-4">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M17.28 9.05a5.5 5.5 0 1 0-10.56 0"></path>
                <path d="M12 14.5s1.5-2 4.5-2 4.5 2 4.5 2"></path>
                <path d="M12 14.5s-1.5-2-4.5-2-4.5 2-4.5 2"></path>
                <path d="m15 12-1-1"></path>
                <path d="m9 12 1-1"></path>
                <path d="M12 22v-3"></path>
                <path d="M12 8V5"></path>
                <path d="M5 12H2"></path>
                <path d="M22 12h-3"></path>
                <path d="m19.07 4.93-2.12 2.12"></path>
                <path d="m7.05 16.95-2.12 2.12"></path>
                <path d="m19.07 19.07-2.12-2.12"></path>
                <path d="m7.05 7.05-2.12-2.12"></path>
              </svg>
            </div>
            <div>
              <h2 class="text-xl font-bold text-slate-900">
                Project 'Moonshot'
              </h2>
              <p class="text-sm font-medium text-amber-600">EXPLORE</p>
            </div>
          </div>
          <p class="text-slate-600 mb-4">
            Investeer in een radicale innovatie. Hoog risico, maar een
            potentieel enorme beloning.
          </p>
          <div class="bg-slate-100 p-3 rounded-lg mb-4">
            <p><strong>Kosten:</strong> €5M</p>
            <p>
              <strong>Opbrengst:</strong> 20% kans op €50M
              <span class="text-green-600 font-semibold">(+€45M)</span>, 80%
              kans op €0 <span class="text-red-600 font-semibold">(-€5M)</span>
            </p>
          </div>
          <label
            for="invest-moonshot"
            class="font-semibold text-slate-700"
            >Aantal investeringen:</label
          >
          <input
            type="number"
            id="invest-moonshot"
            min="0"
            value="0"
            class="mt-2 w-full p-2 rounded-lg border-slate-300 border focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition"
          />
        </div>
      </main>

      <!-- Controls -->
      <footer
        class="mt-6 flex flex-col sm:flex-row items-center justify-center gap-4"
      >
        <button
          id="confirm-button"
          class="w-full sm:w-auto bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700 transition-all shadow-md hover:shadow-lg disabled:bg-slate-400 disabled:cursor-not-allowed disabled:shadow-none"
        >
          Bevestig Investeringen & Ga Naar Volgend Jaar
        </button>
        <button
          id="restart-button"
          class="w-full sm:w-auto bg-slate-200 text-slate-800 font-bold py-3 px-6 rounded-lg hover:bg-slate-300 transition-all"
        >
          Spel Herstarten
        </button>
      </footer>
    </div>

    <!-- Modal for results/game over -->
    <div
      id="modal"
      class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 hidden modal-backdrop"
    >
      <div
        class="bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 md:p-8 text-center modal-content"
      >
        <h2
          id="modal-title"
          class="text-2xl font-bold text-slate-900 mb-4"
        >
          Resultaten van Jaar 1
        </h2>
        <div
          id="modal-body"
          class="text-slate-600 space-y-3 mb-6"
        >
          <!-- Dynamic content here -->
        </div>
        <div
          id="modal-log"
          class="text-left text-sm bg-slate-100 p-4 rounded-lg mb-6 max-h-48 overflow-y-auto"
        >
          <!-- Log content here -->
        </div>
        <button
          id="modal-close-button"
          class="bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700 transition-all w-full"
        >
          Oké, door naar het volgende jaar!
        </button>
      </div>
    </div>

    <!-- Intro Modal -->
    <div
      id="intro-modal"
      class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 modal-backdrop"
    >
      <div
        class="bg-white rounded-2xl shadow-2xl w-full max-w-lg p-6 md:p-8 text-left modal-content"
      >
        <h2 class="text-2xl font-bold text-slate-900 mb-4">
          Welkom bij het Innovatie Portfolio Spel!
        </h2>
        <div class="text-slate-600 space-y-4">
          <p>
            Je bent het managementteam van een bedrijf en hebt 5 jaar (rondes)
            de tijd om de bedrijfswaarde te maximaliseren.
          </p>
          <p>
            Je start met een budget van
            <strong class="text-blue-600">€100 miljoen</strong>.
          </p>
          <p>In elk jaar verdeel je je budget over drie soorten projecten:</p>
          <ul class="list-disc list-inside space-y-2 pl-2">
            <li>
              <strong class="text-blue-600"
                >Project 'Cash Cow' (Exploit):</strong
              >
              Een veilige investering met een gegarandeerde, maar bescheiden
              winst.
            </li>
            <li>
              <strong class="text-purple-600"
                >Project 'Better Faster' (Sustain):</strong
              >
              Een incrementele innovatie met een redelijk risico.
            </li>
            <li>
              <strong class="text-amber-600"
                >Project 'Moonshot' (Explore):</strong
              >
              Een radicale innovatie. Zeer risicovol, maar met een potentieel
              gigantische beloning.
            </li>
          </ul>
          <p>
            Denk goed na over je strategie. Ga je voor de veilige weg, of durf
            je te investeren in de toekomst? Het doel is om na 5 jaar een zo
            hoog mogelijk budget te hebben.
          </p>
        </div>
        <button
          id="start-game-button"
          class="mt-6 bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700 transition-all w-full"
        >
          Ik snap het, laten we beginnen!
        </button>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // Game state
        let state = {};

        // DOM Elements
        const DOMElements = {
          currentYear: document.getElementById("current-year"),
          startBudget: document.getElementById("start-budget"),
          investedAmount: document.getElementById("invested-amount"),
          remainingBudget: document.getElementById("remaining-budget"),
          investCashCow: document.getElementById("invest-cash-cow"),
          investBetterFaster: document.getElementById("invest-better-faster"),
          investMoonshot: document.getElementById("invest-moonshot"),
          confirmButton: document.getElementById("confirm-button"),
          restartButton: document.getElementById("restart-button"),
          modal: document.getElementById("modal"),
          modalTitle: document.getElementById("modal-title"),
          modalBody: document.getElementById("modal-body"),
          modalLog: document.getElementById("modal-log"),
          modalCloseButton: document.getElementById("modal-close-button"),
          introModal: document.getElementById("intro-modal"),
          startGameButton: document.getElementById("start-game-button"),
        };

        // Project costs
        const COSTS = {
          cashCow: 20,
          betterFaster: 10,
          moonshot: 5,
        };

        // Initialize the game
        function initGame() {
          state = {
            currentYear: 1,
            totalBudget: 100,
            gameLog: [],
            isGameOver: false,
          };
          resetInputs();
          updateDashboard();
          DOMElements.confirmButton.disabled = false;
          DOMElements.modal.classList.add("hidden");
          DOMElements.introModal.classList.remove("hidden");
          DOMElements.introModal.querySelector(
            ".modal-content"
          ).style.transform = "scale(1)";
          DOMElements.introModal.style.opacity = "1";
        }

        // Update the dashboard UI
        function updateDashboard() {
          const investments = getInvestments();
          const totalInvested =
            investments.cashCow * COSTS.cashCow +
            investments.betterFaster * COSTS.betterFaster +
            investments.moonshot * COSTS.moonshot;

          const remaining = state.totalBudget - totalInvested;

          DOMElements.currentYear.textContent = `${state.currentYear} / 5`;
          DOMElements.startBudget.textContent = `€${state.totalBudget}M`;
          DOMElements.investedAmount.textContent = `€${totalInvested}M`;
          DOMElements.remainingBudget.textContent = `€${remaining}M`;

          // UI feedback for budget
          DOMElements.remainingBudget.classList.toggle(
            "text-red-600",
            remaining < 0
          );
          DOMElements.remainingBudget.classList.toggle(
            "text-green-600",
            remaining >= 0
          );
          DOMElements.confirmButton.disabled = remaining < 0;
        }

        // Get current investment values from inputs
        function getInvestments() {
          return {
            cashCow: parseInt(DOMElements.investCashCow.value) || 0,
            betterFaster: parseInt(DOMElements.investBetterFaster.value) || 0,
            moonshot: parseInt(DOMElements.investMoonshot.value) || 0,
          };
        }

        function resetInputs() {
          DOMElements.investCashCow.value = 0;
          DOMElements.investBetterFaster.value = 0;
          DOMElements.investMoonshot.value = 0;
        }

        // Handle the next round logic
        function handleNextRound() {
          if (state.isGameOver) return;

          const investments = getInvestments();
          const totalInvestmentCost =
            investments.cashCow * COSTS.cashCow +
            investments.betterFaster * COSTS.betterFaster +
            investments.moonshot * COSTS.moonshot;

          if (totalInvestmentCost > state.totalBudget) {
            alert("Je kunt niet meer investeren dan je budget!");
            return;
          }

          let budgetChange = 0;
          let roundLog = [];

          // 1. Process Cash Cow
          if (investments.cashCow > 0) {
            const profit = investments.cashCow * 5;
            budgetChange += profit;
            roundLog.push(
              `<p>✅ <strong>Project 'Cash Cow'</strong> leverde <span class="font-bold text-green-600">+€${profit}M</span> op.</p>`
            );
          }

          // 2. Process Better Faster
          for (let i = 0; i < investments.betterFaster; i++) {
            if (Math.random() <= 0.5) {
              budgetChange += 10; // +€8M profit
              roundLog.push(
                `<p>👍 <strong>Project 'Better Faster'</strong> was een succes! <span class="font-bold text-green-600">+€8M</span></p>`
              );
            } else {
              budgetChange -= 2; // -€2M loss
              roundLog.push(
                `<p>👎 <strong>Project 'Better Faster'</strong> faalde. <span class="font-bold text-red-600">-€2M</span></p>`
              );
            }
          }

          // 3. Process Moonshot
          for (let i = 0; i < investments.moonshot; i++) {
            if (Math.random() <= 0.2) {
              budgetChange += 45; // +€45M profit
              roundLog.push(
                `<p>🚀 <strong>PROJECT 'MOONSHOT' IS EEN DOORBRAAK!</strong> <span class="font-bold text-green-600">+€45M</span></p>`
              );
            } else {
              budgetChange -= 5; // -€5M loss
              roundLog.push(
                `<p>💥 <strong>Project 'Moonshot'</strong> is mislukt. <span class="font-bold text-red-600">-€5M</span></p>`
              );
            }
          }

          if (totalInvestmentCost === 0) {
            roundLog.push(
              `<p>😴 Je hebt dit jaar niet geïnvesteerd. Geen verandering in budget.</p>`
            );
          }

          // Update state
          const initialBudgetForRound = state.totalBudget;
          state.totalBudget =
            initialBudgetForRound -
            totalInvestmentCost +
            (totalInvestmentCost + budgetChange);
          state.gameLog.push({ year: state.currentYear, log: roundLog });

          showResultsModal(
            initialBudgetForRound,
            totalInvestmentCost,
            budgetChange
          );

          state.currentYear++;
          if (state.currentYear > 5) {
            state.isGameOver = true;
          }
        }

        // Show the results modal
        function showResultsModal(initialBudget, cost, profit) {
          const netResult = profit;
          DOMElements.modalTitle.textContent = `Resultaten van Jaar ${state.currentYear}`;

          let summaryHTML = `
            <p>Startbudget dit jaar: <strong class="text-slate-800">€${initialBudget}M</strong></p>
            <p>Totale investering: <strong class="text-slate-800">€${cost}M</strong></p>
            <p>Netto resultaat: <strong class="${
              netResult >= 0 ? "text-green-600" : "text-red-600"
            }">€${netResult >= 0 ? "+" : ""}${netResult}M</strong></p>
            <hr class="my-4">
            <p class="text-xl">Nieuw totaalbudget: <strong class="text-blue-600">€${
              state.totalBudget
            }M</strong></p>
        `;
          DOMElements.modalBody.innerHTML = summaryHTML;

          const logHtml = state.gameLog[state.gameLog.length - 1].log.join("");
          DOMElements.modalLog.innerHTML = logHtml;

          if (state.isGameOver) {
            DOMElements.modalTitle.textContent = "Spel voorbij!";
            DOMElements.modalBody.innerHTML = `
                <p class="text-lg">Na 5 jaar is je strategische reis ten einde.</p>
                <p class="text-3xl font-bold mt-4 mb-2 text-blue-700">Eindbudget: €${state.totalBudget}M</p>
                <p class="text-slate-500">Wat voor soort leider was jij? Een voorzichtige manager of een gedurfde visionair?</p>
            `;
            DOMElements.modalCloseButton.textContent = "Speel opnieuw";
          } else {
            DOMElements.modalCloseButton.textContent = `Oké, door naar jaar ${
              state.currentYear + 1
            }`;
          }

          DOMElements.modal.classList.remove("hidden");
          DOMElements.modal.style.opacity = "1";
          DOMElements.modal.querySelector(".modal-content").style.transform =
            "scale(1)";
        }

        function closeModal() {
          DOMElements.modal.style.opacity = "0";
          DOMElements.modal.querySelector(".modal-content").style.transform =
            "scale(0.95)";
          setTimeout(() => {
            DOMElements.modal.classList.add("hidden");
            if (state.isGameOver) {
              initGame();
              // Show intro modal again after restart
              DOMElements.introModal.classList.remove("hidden");
              DOMElements.introModal.style.opacity = "1";
              DOMElements.introModal.querySelector(
                ".modal-content"
              ).style.transform = "scale(1)";
            } else {
              resetInputs();
              updateDashboard();
            }
          }, 300);
        }

        // Event Listeners
        [
          DOMElements.investCashCow,
          DOMElements.investBetterFaster,
          DOMElements.investMoonshot,
        ].forEach((input) => {
          input.addEventListener("input", updateDashboard);
        });

        DOMElements.confirmButton.addEventListener("click", handleNextRound);
        DOMElements.restartButton.addEventListener("click", initGame);
        DOMElements.modalCloseButton.addEventListener("click", closeModal);

        DOMElements.startGameButton.addEventListener("click", () => {
          DOMElements.introModal.style.opacity = "0";
          DOMElements.introModal.querySelector(
            ".modal-content"
          ).style.transform = "scale(0.95)";
          setTimeout(() => {
            DOMElements.introModal.classList.add("hidden");
          }, 300);
        });

        // Start the game
        initGame();
      });
    </script>
  </body>
</html>
